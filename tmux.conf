# M-b for local tmux and leave C-b for remote
if "uname | grep -q Darwin" \
    "unbind C-b; \
    set -g prefix M-b; \
    bind -r M-b send-prefix; \
    "

set -g default-terminal "xterm-256color"
setw -g mode-keys vi
set -g bell-action any

set -g mouse on

set -g base-index 1
setw -g pane-base-index 1

set -g status-fg "#ffffff"
set -g status-bg "#222222"
setw -g window-status-fg white
setw -g window-status-bg default
setw -g window-status-attr dim
setw -g window-status-current-fg white
setw -g window-status-current-bg "#666666"
setw -g window-status-current-attr bright

set -g pane-border-fg "#dddddd"
set -g pane-active-border-fg "#ffff00"

set -g message-fg white
set -g message-bg black
set -g message-attr bright

set -g status-left-length 40

bind R source-file ~/.tmux.conf\; display "tmux config reloaded"

bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R
bind \ select-window -l # by default, l is for last window

bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

bind ^ set mouse on
bind * set mouse off


is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind -n C-h if "$is_vim" "send-keys C-h"  "select-pane -L"
bind -n C-j if "$is_vim" "send-keys C-j"  "select-pane -D"
bind -n C-k if "$is_vim" "send-keys C-k"  "select-pane -U"
bind -n C-l if "$is_vim" "send-keys C-l"  "select-pane -R"
bind -n C-\ if "$is_vim" "send-keys C-\\" "select-pane -l"
